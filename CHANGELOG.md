# 1.5.4

- Allows the Chat Mirroring feature to function without a GM in the world. (Toggleable in Settings)
- (dnd5e) Add support fpr missing midi-qol chat cards when mergecards are turned off

## 1.5.3

- Fixed a typo that seldom made the module not work on systems that were not pf2e nor dnd5e.
- (pf2e) checks now display roll arguments, including if the roll was a nat 1 or 20.
- Adds a setting to disable the anonymous module from blocking names on this module.

## 1.5.2

- (pf2e) Fix to rolls without degree of success flag set
- Parse isRoll flagged messages without roll objects as regular chat messages instead
- Show embed colors as foundry user color
- Show username on embeds (toggleable in settings)

## 1.5.1

- (pf2e) Minor bug fixes related to action cards
- Implemented a more robust, language-independent method to detect chat log flushing
- Added more logging to requests

## 1.5.0

- midi-qol GM damage tables are now supported, if whispers are sent to your webhook.
- Improved readability on chat cards
- Tables are now parsed properly.
- If an image was sent to chat without any text, it will also be sent to the webhook.
- DnD5e support is no longer 'experimental'.
- API is now in api.js.

## 1.4.3

- **NEW MODULE SUPPORT** [Monk's TokenBar](https://foundryvtt.com/packages/monks-tokenbar)! Contested Rolls, Roll Requests, and Experience cards now have a custom parser, and will be sent to Discord properly.

## 1.4.2

- **NEW**: Officially added (partial) support for the DnD5e system, more specifically, midi-qol mergecards. Currently experimental, so DnD5e users can turn off the setting from the config menu to use the old (not-so-reliable) parser.
- Minor bug fixes.

## 1.4.1

- Removed the `Main GM ID` setting from the config.
- New GM detection is now in place. Worlds with multiple GMs won't trigger the webhook anymore.
- How this works: The module will now search for a main GM when you enter a world, or if the previous main GM leaves the world. The module will perform all automated actions from the GM it is bound to at the current time.

## 1.4.0

- **NEW**: The Foundry to Discord API! You can now use this module to make it easier to send custom messages to your Discord channel, among other features. Refer to README.md on how to use the API.
- (pf2e) Added support for rerolls! Hero point, fortune, and misfortune rerolls are now sent to the chat as normal.
- Better chat mirroring: Ever needed to delete a message but hate alt-tabbing to Discord to do it? Now, you can delete a message in Foundry, and it will also delete the message linked to it in your channel! This can be disabled in the config for those who like the old style.
- Major code refactorings.
- Minor bug fixes.

## 1.3.0

- **NEW MODULE SUPPORT**: [Chat Media](https://foundryvtt.com/packages/chat-media)! Uploaded images, image links, and videos are now sent to Discord.
- Migrated everything from ye olde XmlHTTPRequests into Fetch() API, all features remain the same.
- Changes queue handling to support Fetch API
- Minor bug fixes.

## 1.2.3

- Hotfix for 1.2.2.
- Other minor bug fixes.

## 1.2.2

- (pf2e) Added support for new action cards in 5.4.0
- Minor bug fixes.

## 1.2.1

- Fix the server status message instructions showing up when you don't want it to.
- Support more formats of chat-cards.
- Several minor bug fixes.

## 1.2.0

- **NEW FEATURE:** Threaded Scenes! This version adds a new config setting which lets you map scenes to different Discord Channel threads. The threads must be within the channel where your webhook URL is set up, and of course, must exist first for this to work. Anything not mapped to a thread will still be sent as usual, so don't worry if you're not going to use this feature.
- Several bug fixes, such as Avatars not being properly sent, and roll embeds not being sent.

## 1.1.6

- Improved support for channel threads, including Server Status Message. Fixes issue #7.
- Improved chat command functionality.
- Minor fixes.

## 1.1.5

- Major improvements to the queueing system, including rate limit protection, and handling of messages in order of being sent. There should be less of a delay when messages are sent to the webhook.
- Refactored most of the code, but functionality remains more or less the same
- (pf2e) Improve support for `@Damage`

## 1.1.4

- The module will now display tokens generated by the Tokenizer module properly!
- (pf2e) small bug fixes in regards to @Check
- (pf2e) @UUID for macros is now supported
- (pf2e) @Check now displays the DCs if it's not set to hidden.

## 1.1.3

- Fixes players being able to set the server status as offline using "ftd serveroff".
- Fixes a bug that will occassionally make the module send the incorrect image to the webhook.
- Chat cards are now treated as a separate entity, but functionality remains more or less the same.
- More code refactorings.

## 1.1.2

- Fixes a small bug with chat cards on other systems that makes it fail to send.
- Minor code refactorings.

## 1.1.1

- Fix an issue where the invite URL not having a "/" at the end not allowing the messages to be posted.
- Minor bug fix.

## 1.1.0

- **NEW FEATURE:** Server status message! This feature detects when your world is ONLINE and edits a message on your Discord channel. To set it to OFFLINE, type "ftd serveroff" in Foundry as the GM. Setup instructions are included on the configuration options for Foundry to Discord. This will only work if you've set up your Webhook URL, obviously.
- This module will now use the default Foundry icon when an avatar doesn't exist or isn't supported by Discord. Supported formats for Discord avatars are as follows: jpg/jpeg, png, webp.

## 1.0.4

- Adds a new option to override common languages for Polyglot.
- Module now uses actor ownership to send chat card descriptions when anonymous is active.
- Adds new option to disable sending of chat cards.
- Minor bug fixes and refactorings.

## 1.0.3

- Changes to chatcard parsing. Descriptions will only be displayed on Discord when the chatcard's source is from a player character.
- Now supports Anonymous much better and hides footers when the setting is enabled.
- (PF2e) Supports hiding traits much better according to Anonymous settings.
- Minor bug fixes.

## 1.0.2

- The module will now attempt to parse targets from a user when rolling a check with message.flavor. This means that stuff like attack rolls, damage rolls, will now have targets parsed on to the embed.

## 1.0.1

- The module will now attempt to support Polyglot on all systems. This only works when the actor structure is similar. For example, PF2e and DnD5e both use `actor.system.traits.languages.value` to store language strings on an actor, so the module will work for both systems.
- Support for additional flavor text, such as the flavor text when rolling weapon attacks in DnD5e.

## 1.0.0

Finally! This module has been in the works for a month now, and I can now confidently release this to the public.

If you didn't read the description, this module is made as a successor to [DiscordConnect](https://github.com/caoranach/DiscordConnect/). It mirrors public chat messages on FVTT to a Discord channel. This will work *very well* on PF2e, and decently on other systems.

**Features:**

- Tokens to Discord Avatars
- Automatic chat card formatting
- Roll embeds
- and more!
